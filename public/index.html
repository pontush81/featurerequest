<!DOCTYPE html>
<html lang="sv">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Önskemål</title>
    <link rel="stylesheet" href="css/styles.css">
    <link rel="icon" type="image/png" href="https://www.kontek.se/favicon.ico">
</head>
<body>
    <header>
        <h1>Önskemål</h1>
        <p class="subtitle">Skicka in dina önskemål</p>
    </header>
    
    <main>
        <form id="requestForm" class="feature-form">
            <div class="form-group">
                <label for="title">Titel *</label>
                <input type="text" id="title" name="title" required>
            </div>

            <div class="form-group">
                <label for="description">Beskrivning *</label>
                <textarea id="description" name="description" required></textarea>
                <small class="form-text">
                    Exempel på format:<br>
                    Som användare vill jag kunna filtrera mina arbetsuppgifter baserat på vem som tilldelat dem,
                    så att jag enkelt kan se vilka uppgifter som kommer från min chef vs. mina kollegor.
                </small>
            </div>

            <div class="form-group">
                <label for="project">Projekt *</label>
                <select id="project" name="project" required>
                    <option value="">Välj projekt...</option>
                    <option value="Kontek Lön">Kontek Lön</option>
                    <option value="Kontek HRM">Kontek HRM</option>
                    <option value="Interna verktyg">Interna verktyg</option>
                </select>
            </div>

            <div class="form-group">
                <label for="acceptanceCriteria">Acceptanskriterier *</label>
                <textarea id="acceptanceCriteria" name="acceptanceCriteria" required></textarea>
            </div>

            <div class="form-group">
                <label for="requesterName">Ditt namn *</label>
                <input type="text" id="requesterName" name="requesterName" required>
            </div>

            <div class="form-group">
                <label for="requesterEmail">Din e-post *</label>
                <input type="email" id="requesterEmail" name="requesterEmail" required>
            </div>

            <div class="form-group">
                <label>Business Value (PRAISED)</label>
                <div class="praised-categories">
                    <div class="praised-category">
                        <input type="checkbox" id="praised_productivity">
                        <label for="praised_productivity">Productivity gains</label>
                        <select id="productivity_rating" disabled>
                            <option value="0">Ingen påverkan</option>
                            <option value="1">Låg påverkan</option>
                            <option value="2">Medel påverkan</option>
                            <option value="3">Hög påverkan</option>
                        </select>
                    </div>
                    <div class="praised-category">
                        <input type="checkbox" id="praised_reduced">
                        <label for="praised_reduced">Reduced costs</label>
                        <select id="reduced_rating" disabled>
                            <option value="0">Ingen påverkan</option>
                            <option value="1">Låg påverkan</option>
                            <option value="2">Medel påverkan</option>
                            <option value="3">Hög påverkan</option>
                        </select>
                    </div>
                    <div class="praised-category">
                        <input type="checkbox" id="praised_avoided">
                        <label for="praised_avoided">Avoided costs</label>
                        <select id="avoided_rating" disabled>
                            <option value="0">Ingen påverkan</option>
                            <option value="1">Låg påverkan</option>
                            <option value="2">Medel påverkan</option>
                            <option value="3">Hög påverkan</option>
                        </select>
                    </div>
                    <div class="praised-category">
                        <input type="checkbox" id="praised_increased">
                        <label for="praised_increased">Increased revenue</label>
                        <select id="increased_rating" disabled>
                            <option value="0">Ingen påverkan</option>
                            <option value="1">Låg påverkan</option>
                            <option value="2">Medel påverkan</option>
                            <option value="3">Hög påverkan</option>
                        </select>
                    </div>
                    <div class="praised-category">
                        <input type="checkbox" id="praised_service">
                        <label for="praised_service">Service level improvements</label>
                        <select id="service_rating" disabled>
                            <option value="0">Ingen påverkan</option>
                            <option value="1">Låg påverkan</option>
                            <option value="2">Medel påverkan</option>
                            <option value="3">Hög påverkan</option>
                        </select>
                    </div>
                    <div class="praised-category">
                        <input type="checkbox" id="praised_enhanced">
                        <label for="praised_enhanced">Enhanced quality</label>
                        <select id="enhanced_rating" disabled>
                            <option value="0">Ingen påverkan</option>
                            <option value="1">Låg påverkan</option>
                            <option value="2">Medel påverkan</option>
                            <option value="3">Hög påverkan</option>
                        </select>
                    </div>
                    <div class="praised-category">
                        <input type="checkbox" id="praised_differentiation">
                        <label for="praised_differentiation">Differentiation in the marketplace</label>
                        <select id="differentiation_rating" disabled>
                            <option value="0">Ingen påverkan</option>
                            <option value="1">Låg påverkan</option>
                            <option value="2">Medel påverkan</option>
                            <option value="3">Hög påverkan</option>
                        </select>
                    </div>
                </div>
            </div>

            <button type="submit" class="submit-button">Skicka in önskemål</button>
        </form>

        <div id="statusMessage" class="status-message"></div>
        
        <div id="requestsTableContainer" class="section">
            <h2>Inskickade önskemål</h2>
            <p class="table-info">Sorteras automatiskt efter högst affärsvärde</p>
            
            <div class="admin-actions">
                <button id="resetDataButton" class="danger-button">Rensa alla önskemål</button>
            </div>
            
            <table id="requestsTable">
                <thead>
                    <tr>
                        <th>Date</th>
                        <th>Project</th>
                        <th>Title</th>
                        <th>Status</th>
                        <th>Business Value ↓</th>
                    </tr>
                </thead>
                <tbody id="requestsTableBody">
                    <!-- Requests will be loaded here -->
                </tbody>
            </table>
        </div>
    </main>

    <footer>
        <p>Kontek Feature Request Portal &copy; 2024</p>
    </footer>

    <script>
        // Override storage methods to prevent errors
        (function() {
            try {
                // Attempt to access localStorage to check if it's available
                window.localStorage.getItem('test');
            } catch (e) {
                // Create a memory-based storage fallback
                var memoryStorage = {};
                var noop = function() {};
                
                // Replace localStorage with a dummy object
                window.localStorage = {
                    getItem: function(key) { return memoryStorage[key] || null; },
                    setItem: function(key, value) { memoryStorage[key] = value; },
                    removeItem: function(key) { delete memoryStorage[key]; },
                    clear: function() { memoryStorage = {}; },
                    key: function(i) { return Object.keys(memoryStorage)[i] || null; },
                    length: 0
                };
                
                // Same for sessionStorage
                window.sessionStorage = {
                    getItem: function(key) { return null; },
                    setItem: noop,
                    removeItem: noop,
                    clear: noop,
                    key: function() { return null; },
                    length: 0
                };
                
                console.log('Storage API not available, using memory fallback');
            }
        })();
    </script>
    
    <script src="js/praised.js"></script>
    <script src="js/main.js"></script>
</body>
</html>