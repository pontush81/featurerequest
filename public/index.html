<!DOCTYPE html>
<html lang="sv">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Önskemål</title>
    <link rel="stylesheet" href="css/styles.css">
    <link rel="icon" type="image/png" href="https://www.kontek.se/favicon.ico">
</head>
<body>
    <header>
        <h1>Önskemål</h1>
        <p class="subtitle">Skicka in dina önskemål</p>
    </header>
    
    <main>
        <form id="requestForm" class="feature-form">
            <div class="form-group">
                <label for="project">Projekt *</label>
                <select id="project" name="project" required>
                    <option value="">Välj projekt...</option>
                    <option value="Kontek Lön">Kontek Lön</option>
                    <option value="Kontek HRM">Kontek HRM</option>
                    <option value="Interna verktyg">Interna verktyg</option>
                    <option value="Jag vet inte">Jag vet inte</option>
                </select>
            </div>
            
            <div class="form-group">
                <label for="title">Titel *</label>
                <input type="text" id="title" name="title" required>
            </div>

            <div class="form-group">
                <label for="description">Beskrivning *</label>
                <textarea id="description" name="description" required></textarea>
                <small class="form-text">
                    Exempel på format:<br>
                    Som användare vill jag kunna filtrera mina arbetsuppgifter baserat på vem som tilldelat dem,
                    så att jag enkelt kan se vilka uppgifter som kommer från min chef vs. mina kollegor.
                </small>
            </div>

            <div class="form-group">
                <label for="acceptanceCriteria">Acceptanskriterier *</label>
                <textarea id="acceptanceCriteria" name="acceptanceCriteria" required></textarea>
                <small class="form-text">
                    Exempel på format:<br>
                    1. Ett filter för tilldelad person visas i vyerna för arbetsuppgifter<br>
                    2. Filtret visar alla personer som har tilldelat uppgifter<br>
                    3. När man väljer en person uppdateras listan omedelbart<br>
                    4. Det finns ett "Rensa filter" alternativ
                </small>
            </div>

            <div class="form-group">
                <label for="requesterName">Ditt namn *</label>
                <input type="text" id="requesterName" name="requesterName" required>
            </div>

            <div class="form-group">
                <label for="requesterEmail">Din e-post *</label>
                <input type="email" id="requesterEmail" name="requesterEmail" required>
            </div>

            <div class="form-group">
                <h3>Business Value Categories (PRAISED)</h3>
                <p class="subtext">Bedöm varje kategori från 0 (ingen påverkan) till 4 (högsta påverkan)</p>
                
                <div class="praised-grid">
                    <div class="praised-item">
                        <label>
                            <input type="checkbox" name="praised_productivity" id="praised_productivity">
                            Productivity gains
                        </label>
                        <select name="productivity_rating" id="productivity_rating">
                            <option value="0">0 - Ingen påverkan</option>
                            <option value="1">1 - Låg påverkan</option>
                            <option value="2">2 - Medel påverkan</option>
                            <option value="3">3 - Hög påverkan</option>
                            <option value="4">4 - Högsta påverkan</option>
                        </select>
                    </div>

                    <div class="praised-item">
                        <label>
                            <input type="checkbox" name="praised_reduced" id="praised_reduced">
                            Reduced costs
                        </label>
                        <select name="reduced_rating" id="reduced_rating">
                            <option value="0">0 - Ingen påverkan</option>
                            <option value="1">1 - Låg påverkan</option>
                            <option value="2">2 - Medel påverkan</option>
                            <option value="3">3 - Hög påverkan</option>
                            <option value="4">4 - Högsta påverkan</option>
                        </select>
                    </div>

                    <div class="praised-item">
                        <label>
                            <input type="checkbox" name="praised_avoided" id="praised_avoided">
                            Avoided costs
                        </label>
                        <select name="avoided_rating" id="avoided_rating">
                            <option value="0">0 - Ingen påverkan</option>
                            <option value="1">1 - Låg påverkan</option>
                            <option value="2">2 - Medel påverkan</option>
                            <option value="3">3 - Hög påverkan</option>
                            <option value="4">4 - Högsta påverkan</option>
                        </select>
                    </div>

                    <div class="praised-item">
                        <label>
                            <input type="checkbox" name="praised_increased" id="praised_increased">
                            Increased revenue
                        </label>
                        <select name="increased_rating" id="increased_rating">
                            <option value="0">0 - Ingen påverkan</option>
                            <option value="1">1 - Låg påverkan</option>
                            <option value="2">2 - Medel påverkan</option>
                            <option value="3">3 - Hög påverkan</option>
                            <option value="4">4 - Högsta påverkan</option>
                        </select>
                    </div>

                    <div class="praised-item">
                        <label>
                            <input type="checkbox" name="praised_service" id="praised_service">
                            Service level improvements
                        </label>
                        <select name="service_rating" id="service_rating">
                            <option value="0">0 - Ingen påverkan</option>
                            <option value="1">1 - Låg påverkan</option>
                            <option value="2">2 - Medel påverkan</option>
                            <option value="3">3 - Hög påverkan</option>
                            <option value="4">4 - Högsta påverkan</option>
                        </select>
                    </div>

                    <div class="praised-item">
                        <label>
                            <input type="checkbox" name="praised_enhanced" id="praised_enhanced">
                            Enhanced quality
                        </label>
                        <select name="enhanced_rating" id="enhanced_rating">
                            <option value="0">0 - Ingen påverkan</option>
                            <option value="1">1 - Låg påverkan</option>
                            <option value="2">2 - Medel påverkan</option>
                            <option value="3">3 - Hög påverkan</option>
                            <option value="4">4 - Högsta påverkan</option>
                        </select>
                    </div>

                    <div class="praised-item">
                        <label>
                            <input type="checkbox" name="praised_differentiation" id="praised_differentiation">
                            Differentiation in the marketplace
                        </label>
                        <select name="differentiation_rating" id="differentiation_rating">
                            <option value="0">0 - Ingen påverkan</option>
                            <option value="1">1 - Låg påverkan</option>
                            <option value="2">2 - Medel påverkan</option>
                            <option value="3">3 - Hög påverkan</option>
                            <option value="4">4 - Högsta påverkan</option>
                        </select>
                    </div>
                </div>
                <p class="subtext">Välj och bedöm tillämpliga kategorier för detta önskemål.</p>
            </div>

            <input type="hidden" id="submissionDate" name="submissionDate">
            
            <button type="submit" class="submit-button">Skicka in önskemål</button>
        </form>

        <div id="statusMessage" class="status-message"></div>
        
        <div id="requestsTableContainer" class="section">
            <h2>Inskickade önskemål</h2>
            <p class="table-info">Sorteras automatiskt efter högst affärsvärde</p>
            
            <div class="admin-actions">
                <button id="resetDataButton" class="danger-button">Rensa alla önskemål</button>
            </div>
            
            <table id="requestsTable">
                <thead>
                    <tr>
                        <th>Date</th>
                        <th>Project</th>
                        <th>Title</th>
                        <th>Status</th>
                        <th>Business Value ↓</th>
                    </tr>
                </thead>
                <tbody id="requestsTableBody">
                    <!-- Requests will be loaded here -->
                </tbody>
            </table>
        </div>
    </main>

    <footer>
        <p>Kontek Feature Request Portal &copy; 2024</p>
    </footer>

    <script>
        // Override storage methods to prevent errors
        (function() {
            try {
                // Attempt to access localStorage to check if it's available
                window.localStorage.getItem('test');
            } catch (e) {
                // Create a memory-based storage fallback
                var memoryStorage = {};
                var noop = function() {};
                
                // Replace localStorage with a dummy object
                window.localStorage = {
                    getItem: function(key) { return memoryStorage[key] || null; },
                    setItem: function(key, value) { memoryStorage[key] = value; },
                    removeItem: function(key) { delete memoryStorage[key]; },
                    clear: function() { memoryStorage = {}; },
                    key: function(i) { return Object.keys(memoryStorage)[i] || null; },
                    length: 0
                };
                
                // Same for sessionStorage
                window.sessionStorage = {
                    getItem: function(key) { return null; },
                    setItem: noop,
                    removeItem: noop,
                    clear: noop,
                    key: function() { return null; },
                    length: 0
                };
                
                console.log('Storage API not available, using memory fallback');
            }
        })();
    </script>
    
    <script src="js/praised.js"></script>
    <script src="js/main.js"></script>
</body>
</html>