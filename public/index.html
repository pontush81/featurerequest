<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Feature Requests</title>
    <link rel="stylesheet" href="css/styles.css">
    <link rel="icon" type="image/png" href="https://www.kontek.se/favicon.ico">
</head>
<body>
    <header>
        <h1>Feature Requests</h1>
        <p class="subtitle">Submit your feature requests</p>
    </header>
    
    <main>
        <form id="requestForm" class="feature-form">
            <div class="form-group">
                <label for="project">Project *</label>
                <select id="project" name="project" required>
                    <option value="">Select project...</option>
                    <option value="Kontek Lön">Kontek Payroll</option>
                    <option value="Kontek HRM">Kontek HRM</option>
                    <option value="Interna verktyg">Internal Tools</option>
                    <option value="Jag vet inte">I don't know</option>
                </select>
            </div>
            
            <div class="form-group">
                <label for="title">Title *</label>
                <input type="text" id="title" name="title" required>
            </div>

            <div class="form-group">
                <label for="description">Description *</label>
                <textarea id="description" name="description" required></textarea>
                <small class="form-text">
                    Example format:<br>
                    As a user, I want to be able to filter my tasks based on who assigned them,
                    so that I can easily see which tasks come from my manager vs. my colleagues.
                </small>
            </div>

            <div class="form-group">
                <label for="acceptanceCriteria">Acceptance Criteria *</label>
                <textarea id="acceptanceCriteria" name="acceptanceCriteria" required></textarea>
                <small class="form-text">
                    Example format:<br>
                    1. A filter for assigned person is displayed in the task views<br>
                    2. The filter shows all people who have assigned tasks<br>
                    3. When selecting a person, the list updates immediately<br>
                    4. There is a "Clear filter" option
                </small>
            </div>

            <div class="form-group">
                <label for="requesterName">Your Name *</label>
                <input type="text" id="requesterName" name="requesterName" required>
            </div>

            <div class="form-group">
                <label for="requesterEmail">Your Email *</label>
                <input type="email" id="requesterEmail" name="requesterEmail" required>
            </div>

            <div class="form-group">
                <h3>Business Value Categories</h3>
                <p class="subtext">Rate each category from 0 (no impact) to 4 (highest impact)</p>
                
                <div class="praised-grid">
                    <div class="praised-item">
                        <label>
                            <input type="checkbox" name="praised_productivity" id="praised_productivity">
                            Productivity gains
                        </label>
                        <select name="productivity_rating" id="productivity_rating">
                            <option value="0">0 - No impact</option>
                            <option value="1">1 - Low impact</option>
                            <option value="2">2 - Medium impact</option>
                            <option value="3">3 - High impact</option>
                            <option value="4">4 - Highest impact</option>
                        </select>
                    </div>

                    <div class="praised-item">
                        <label>
                            <input type="checkbox" name="praised_reduced" id="praised_reduced">
                            Reduced costs
                        </label>
                        <select name="reduced_rating" id="reduced_rating">
                            <option value="0">0 - No impact</option>
                            <option value="1">1 - Low impact</option>
                            <option value="2">2 - Medium impact</option>
                            <option value="3">3 - High impact</option>
                            <option value="4">4 - Highest impact</option>
                        </select>
                    </div>

                    <div class="praised-item">
                        <label>
                            <input type="checkbox" name="praised_avoided" id="praised_avoided">
                            Compliancy
                        </label>
                        <select name="avoided_rating" id="avoided_rating">
                            <option value="0">0 - No impact</option>
                            <option value="1">1 - Low impact</option>
                            <option value="2">2 - Medium impact</option>
                            <option value="3">3 - High impact</option>
                            <option value="4">4 - Highest impact</option>
                        </select>
                    </div>

                    <div class="praised-item">
                        <label>
                            <input type="checkbox" name="praised_increased" id="praised_increased">
                            Increased revenue
                        </label>
                        <select name="increased_rating" id="increased_rating">
                            <option value="0">0 - No impact</option>
                            <option value="1">1 - Low impact</option>
                            <option value="2">2 - Medium impact</option>
                            <option value="3">3 - High impact</option>
                            <option value="4">4 - Highest impact</option>
                        </select>
                    </div>

                    <div class="praised-item">
                        <label>
                            <input type="checkbox" name="praised_service" id="praised_service">
                            Service level improvements
                        </label>
                        <select name="service_rating" id="service_rating">
                            <option value="0">0 - No impact</option>
                            <option value="1">1 - Low impact</option>
                            <option value="2">2 - Medium impact</option>
                            <option value="3">3 - High impact</option>
                            <option value="4">4 - Highest impact</option>
                        </select>
                    </div>

                    <div class="praised-item">
                        <label>
                            <input type="checkbox" name="praised_enhanced" id="praised_enhanced">
                            Enhanced quality
                        </label>
                        <select name="enhanced_rating" id="enhanced_rating">
                            <option value="0">0 - No impact</option>
                            <option value="1">1 - Low impact</option>
                            <option value="2">2 - Medium impact</option>
                            <option value="3">3 - High impact</option>
                            <option value="4">4 - Highest impact</option>
                        </select>
                    </div>
                </div>
                <p class="subtext">Select and rate applicable business value categories for this request.</p>
            </div>

            <input type="hidden" id="submissionDate" name="submissionDate">
            
            <button type="submit" class="submit-button">Submit Request</button>
        </form>

        <div id="statusMessage" class="status-message"></div>
        
        <div id="requestsTableContainer" class="section">
            <h2>Submitted Requests</h2>
            <p class="table-info">Automatically sorted by highest business value</p>
            
            <div class="admin-actions">
                <button id="resetDataButton" class="danger-button">Clear All Requests</button>
            </div>
            
            <table id="requestsTable">
                <thead>
                    <tr>
                        <th>Date</th>
                        <th>Project</th>
                        <th>Title</th>
                        <th>Status</th>
                        <th>Business Value ↓</th>
                    </tr>
                </thead>
                <tbody id="requestsTableBody">
                    <!-- Requests will be loaded here -->
                </tbody>
            </table>
        </div>
    </main>

    <footer>
        <p>Kontek Feature Request Portal &copy; 2024</p>
    </footer>

    <script>
        // Override storage methods to prevent errors
        (function() {
            try {
                // Attempt to access localStorage to check if it's available
                window.localStorage.getItem('test');
            } catch (e) {
                // Create a memory-based storage fallback
                var memoryStorage = {};
                var noop = function() {};
                
                // Replace localStorage with a dummy object
                window.localStorage = {
                    getItem: function(key) { return memoryStorage[key] || null; },
                    setItem: function(key, value) { memoryStorage[key] = value; },
                    removeItem: function(key) { delete memoryStorage[key]; },
                    clear: function() { memoryStorage = {}; },
                    key: function(i) { return Object.keys(memoryStorage)[i] || null; },
                    length: 0
                };
                
                // Same for sessionStorage
                window.sessionStorage = {
                    getItem: function(key) { return null; },
                    setItem: noop,
                    removeItem: noop,
                    clear: noop,
                    key: function() { return null; },
                    length: 0
                };
                
                console.log('Storage API not available, using memory fallback');
            }
        })();
    </script>
    
    <script src="js/praised.js"></script>
    <script src="js/main.js"></script>
</body>
</html>